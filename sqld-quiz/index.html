<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SQLD 인터랙티브 퀴즈</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true">SQLD</div>
          <div class="brandText">
            <div class="brandTitle">인터랙티브 퀴즈</div>
            <div class="brandSub">자동 출제 · 즉시 채점 · 오답 풀이</div>
          </div>
        </div>
        <div class="topActions">
          <button id="btnResetStats" class="btn btnGhost" type="button">통계 초기화</button>
          <button id="btnExport" class="btn btnGhost" type="button">결과 내보내기</button>
        </div>
      </header>

      <main class="layout">
        <aside class="panel">
          <section class="card">
            <h2 class="cardTitle">출제 설정</h2>
            <div class="formGrid">
              <label class="field">
                <span class="label">문항 수</span>
                <input id="inputCount" class="input" type="number" min="5" max="50" step="1" value="20" />
              </label>

              <label class="field">
                <span class="label">난이도</span>
                <select id="selectDifficulty" class="select">
                  <option value="any" selected>전체</option>
                  <option value="easy">하</option>
                  <option value="medium">중</option>
                  <option value="hard">상</option>
                </select>
              </label>

              <label class="field">
                <span class="label">영역</span>
                <select id="selectTopic" class="select">
                  <option value="any" selected>전체</option>
                  <option value="sql">SQL</option>
                  <option value="modeling">데이터 모델링</option>
                  <option value="db">DB/트랜잭션</option>
                  <option value="tuning">튜닝/인덱스</option>
                  <option value="security">보안/권한</option>
                </select>
              </label>

              <label class="field">
                <span class="label">오답 위주</span>
                <select id="selectBias" class="select">
                  <option value="mixed" selected>혼합(추천)</option>
                  <option value="wrongFirst">오답 우선</option>
                  <option value="newFirst">새 문항 우선</option>
                </select>
              </label>

              <label class="checkbox">
                <input id="checkShowExplainAfterSubmit" type="checkbox" checked />
                <span>제출 후 해설 자동 펼치기</span>
              </label>
              <label class="checkbox">
                <input id="checkTimer" type="checkbox" />
                <span>타이머 사용</span>
              </label>

              <label class="field">
                <span class="label">타이머(분)</span>
                <input id="inputMinutes" class="input" type="number" min="5" max="120" step="5" value="30" disabled />
              </label>
            </div>
            <div class="row">
              <button id="btnStart" class="btn btnPrimary" type="button">퀴즈 시작</button>
              <button id="btnResume" class="btn btnGhost" type="button">이어하기</button>
            </div>
            <p class="hint">
              팁: 오답을 쌓아두면 다음 회차에서 “오답 우선”으로 자동 출제됩니다. 통계는 브라우저에 저장됩니다.
            </p>
          </section>

          <section class="card">
            <h2 class="cardTitle">학습 통계</h2>
            <div class="stats">
              <div class="stat">
                <div class="statLabel">누적 풀이</div>
                <div id="statTotal" class="statValue">-</div>
              </div>
              <div class="stat">
                <div class="statLabel">정답률</div>
                <div id="statAcc" class="statValue">-</div>
              </div>
              <div class="stat">
                <div class="statLabel">오답 노트</div>
                <div id="statWrong" class="statValue">-</div>
              </div>
            </div>
            <div id="weakTopics" class="weakTopics"></div>
          </section>
        </aside>

        <section class="content">
          <section id="cardQuiz" class="card hidden">
            <div class="quizHeader">
              <div class="progress">
                <div class="progressMeta">
                  <div id="progressText" class="progressText">-</div>
                  <div id="timerText" class="timer hidden">-</div>
                </div>
                <div class="progressBar" aria-hidden="true"><div id="progressFill" class="progressFill"></div></div>
              </div>
              <div class="pillRow">
                <span id="pillTopic" class="pill">-</span>
                <span id="pillDifficulty" class="pill pillAlt">-</span>
              </div>
            </div>

            <article class="question">
              <h2 id="qStem" class="qStem">-</h2>

              <div id="qExtras" class="extras"></div>

              <div id="qChoices" class="choices"></div>

              <div id="qShort" class="short hidden">
                <label class="field">
                  <span class="label">정답 입력</span>
                  <input id="inputShort" class="input" type="text" placeholder="예: LAG, RANK, CONNECT BY PRIOR ..." />
                </label>
              </div>

              <div class="row">
                <button id="btnSubmit" class="btn btnPrimary" type="button">제출</button>
                <button id="btnSkip" class="btn btnGhost" type="button">건너뛰기</button>
                <button id="btnNext" class="btn btnGhost" type="button" disabled>다음</button>
              </div>

              <div id="feedback" class="feedback hidden"></div>

              <details id="explainBox" class="explain">
                <summary>해설 보기</summary>
                <div id="explainBody" class="explainBody">-</div>
              </details>
            </article>
          </section>

          <section id="cardResult" class="card hidden">
            <h2 class="cardTitle">결과</h2>
            <div class="resultGrid">
              <div class="resultScore">
                <div class="big" id="resultScore">-</div>
                <div class="muted" id="resultMeta">-</div>
                <div class="row">
                  <button id="btnRetryWrong" class="btn btnPrimary" type="button">오답만 다시 풀기</button>
                  <button id="btnNewQuiz" class="btn btnGhost" type="button">새 퀴즈</button>
                </div>
              </div>
              <div class="resultWrong">
                <h3 class="subTitle">오답/미답 문항</h3>
                <div id="wrongList" class="wrongList"></div>
              </div>
            </div>
          </section>

          <section id="cardWelcome" class="card">
            <h2 class="cardTitle">사용법</h2>
            <ul class="bullets">
              <li>좌측에서 문항 수/영역/난이도를 고르고 <b>퀴즈 시작</b>을 누르세요.</li>
              <li>제출하면 즉시 채점되고, 해설/정답 키워드가 제공합니다.</li>
              <li>오답은 자동으로 기록되어 다음 회차에서 오답 위주 출제가 가능합니다.</li>
            </ul>
            <div class="callout">
              이 앱은 로컬에서만 동작합니다. 인터넷 없이도 문제은행/템플릿으로 자동 출제가 됩니다.
            </div>
          </section>
        </section>
      </main>

      <footer class="footer">
        <div class="muted">SQLD 대비용 로컬 퀴즈 · 저장: 브라우저 LocalStorage</div>
      </footer>
    </div>

    <script src="./questionBank.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
